% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/tidyMS_aggregation.R
\name{aggregateTopNIntensities}
\alias{aggregateTopNIntensities}
\title{aggregates top N intensities}
\usage{
aggregateTopNIntensities(pdata, config, func, N = 3)
}
\arguments{
\item{pdata}{data.frame}

\item{config}{AnalysisConfiguration}

\item{func}{function to use for aggregation}

\item{N}{default 3 top intensities.}
}
\value{
list with data and new reduced configuration (config)
}
\description{
run \link{rankPrecursorsByIntensity} first
}
\examples{


library(LFQService)
library(tidyverse)
config <- LFQServiceData::spectronautDIAData250_config$clone(deep=TRUE)
res <- removeLarge_Q_Values(LFQServiceData::spectronautDIAData250_analysis, config)
res <- rankPrecursorsByIntensity(res,config)
res \%>\% dplyr::select(c(config$table$hierarchyKeys(),"srm_meanInt"  ,"srm_meanIntRank")) \%>\%
distinct() \%>\%
arrange(!!!syms(c(config$table$hkeysDepth(),"srm_meanIntRank")))

mean <- function(x){mean(x, na.rm=TRUE)}
sum <- function(x){sum(x, na.rm = TRUE)}

resTOPN <- aggregateTopNIntensities(res, config, func = mean_na, N=3)

stopifnot(dim(resTOPN$data) == c(10423, 10))
stopifnot( names(resTOPN) \%in\% c("data", "config") )
config$table$getWorkIntensity()
debug(plot_aggregation)
tmpRob <- plot_aggregation(res, config, resTOPN$data, resTOPN$config, show.legen=TRUE)
tmpRob$plot[[4]]

}
\seealso{
Other aggregation: 
\code{\link{INTERNAL_FUNCTIONS_BY_FAMILY}},
\code{\link{aggregate_intensity}()},
\code{\link{medpolishPlydf_config}()},
\code{\link{medpolishPlydf}()},
\code{\link{medpolishPly}()},
\code{\link{plot_hierarchies_add_quantline}()},
\code{\link{plot_hierarchies_line_df}()},
\code{\link{plot_hierarchies_line}()},
\code{\link{summarizeRobust_config}()},
\code{\link{summarizeRobust}()}
}
\concept{aggregation}
\keyword{internal}

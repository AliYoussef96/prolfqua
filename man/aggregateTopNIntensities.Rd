% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/tidyMS_aggregation.R
\name{aggregateTopNIntensities}
\alias{aggregateTopNIntensities}
\title{aggregates top N intensities}
\usage{
aggregateTopNIntensities(pdata, config, .func, N = 3)
}
\arguments{
\item{pdata}{data.frame}

\item{config}{AnalysisConfiguration}

\item{N}{default 3 top intensities.}

\item{func}{function to use for aggregation}
}
\value{
list with data and new reduced configuration (config)
}
\description{
run \link{rankPrecursorsByIntensity} first
}
\examples{

dd <- old2new(prolfqua_data('data_ionstar')$filtered())
config <- dd$config
res <- dd$data
ranked <- rankPrecursorsByIntensity(res,config)

mean_f <- function(x, name = FALSE){
 if(name){return("mean")};mean(x, na.rm=TRUE)
 }
sum_f <- function(x, name =FALSE){
 if(name){return("sum")};sum(x, na.rm = TRUE)
 }

resTOPN <- aggregateTopNIntensities(
 ranked,
 config,
 .func = mean_f,
  N=3)

print(dim(resTOPN$data))
# stopifnot(dim(resTOPN$data) == c(3260, 8))
stopifnot( names(resTOPN) \%in\% c("data", "config") )
config$table$getWorkIntensity()
#debug(plot_aggregation)
tmpRob <- plot_aggregation(ranked,
 config,
 resTOPN$data,
 resTOPN$config,
 show.legend=TRUE)
stopifnot( "ggplot" \%in\% class(tmpRob$plots[[4]]) )

}
\seealso{
Other aggregation: 
\code{\link{INTERNAL_FUNCTIONS_BY_FAMILY}},
\code{\link{aggregate_intensity}()},
\code{\link{intensity_summary_by_hkeys}()},
\code{\link{medpolishPlydf_config}()},
\code{\link{medpolishPlydf}()},
\code{\link{medpolishPly}()},
\code{\link{medpolish_protein_quants}()},
\code{\link{plot_aggregation}()},
\code{\link{plot_hierarchies_add_quantline}()},
\code{\link{plot_hierarchies_line_df}()},
\code{\link{plot_hierarchies_line}()},
\code{\link{summarizeRobust_config}()},
\code{\link{summarizeRobust}()}
}
\concept{aggregation}
\keyword{internal}

% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/tidyMS_aggregation.R
\name{summarizeRobust}
\alias{summarizeRobust}
\title{summarize proteins using MASS:rlm}
\usage{
summarizeRobust(pdata, expression, feature, samples, maxIt = 20)
}
\arguments{
\item{pdata}{data}

\item{expression}{intensities}

\item{feature}{e.g. peptideIDs.}

\item{sample}{e.g. sampleName}
}
\description{
summarize proteins using MASS:rlm
}
\examples{
library(tidyverse)
xx <- data.frame(expression = rnorm(20,0,10), feature = rep(LETTERS[1:5],4), samples= rep(letters[1:4],5))

bb <- summarizeRobust(xx , "expression", "feature", "samples", maxIt = 20)
bb

xx2 <- data.frame(log2Area = rnorm(20,0,10), peptide_Id = rep(LETTERS[1:5],4), sampleName = rep(letters[1:4],5))
summarizeRobust(xx2, "log2Area", "peptide_Id", "sampleName")

summarizeRobust(data_checksummarizationrobust87,"log2Area", "peptide_Id", "sampleName")
summarizeRobust(data_checksummarizerobust69,"log2Area", "peptide_Id", "sampleName")
res <- vector(100,mode = "list")
for (i in 1:100) {
  xx3 <- xx2
  xx3$log2Area[sample(1:20,sample(1:15,1))] <- NA
  res[[i]] <- list(data = xx3, summary = summarizeRobust(xx3, "log2Area", "peptide_Id", "sampleName"))
}
summarizeRobust(xx2[xx2$peptide_Id == 'A',],"log2Area", "peptide_Id", "sampleName")
summarizeRobust(xx2[xx2$sampleName == 'a',],"log2Area", "peptide_Id", "sampleName")


bb <- prolfqua::data_ionstar$filtered()
stopifnot(nrow(bb$data) == 25780)
conf <- bb$config
data <- bb$data
conf$table$hierarchyDepth = 1
xnested <- data \%>\%
  group_by_at(conf$table$hkeysDepth()) \%>\% tidyr::nest()

feature <- setdiff(conf$table$hierarchyKeys(),  conf$table$hkeysDepth())
x <- xnested$data[[1]]
bb <- summarizeRobust(x,
 expression = conf$table$getWorkIntensity(),
  feature = feature,
   samples = conf$table$sampleName)

prolfqua:::.reestablish_condition(x,bb, conf)

}
\seealso{
Other aggregation: 
\code{\link{INTERNAL_FUNCTIONS_BY_FAMILY}},
\code{\link{aggregateTopNIntensities}()},
\code{\link{aggregate_intensity}()},
\code{\link{intensity_summary_by_hkeys}()},
\code{\link{medpolishPlydf_config}()},
\code{\link{medpolishPlydf}()},
\code{\link{medpolishPly}()},
\code{\link{medpolish_protein_quants}()},
\code{\link{plot_aggregation}()},
\code{\link{plot_hierarchies_add_quantline}()},
\code{\link{plot_hierarchies_line_df}()},
\code{\link{plot_hierarchies_line}()},
\code{\link{summarizeRobust_config}()}
}
\concept{aggregation}
\keyword{internal}
